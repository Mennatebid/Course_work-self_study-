def improve(update, close , guess=1):
    'the function updates an initial guess based on how close it is to a specific value'
    while not close(guess):
        guess=update(guess)
    return guess
def update_guess(guess):
    'update guess by mathematical operation'
    return 1/guess +1 
def square_close_to_successor(guess):
    'checks by recursion if a guess is within a specific margin'
    return approx_eq(guess*guess , guess+1)
def approx_eq(x,y,tolerance = 1e-3):
    'checks if x y are within a marigin of tolerance'
    return abs(x - y) < tolerance
phi_approx = improve(update_guess , square_close_to_successor)

from math import sqrt
def improve_test():
    phi = 1/2 + sqrt(5)/2
    phi_approx = improve(update_guess , square_close_to_successor)
    assert(approx_eq(phi,phi_approx)) , 'phi differs from its approximation'

improve_test()
